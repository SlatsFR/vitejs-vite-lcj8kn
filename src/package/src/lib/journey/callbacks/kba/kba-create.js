import{SvelteComponent as e,init as t,safe_not_equal as n,binding_callbacks as s,bind as a,element as i,create_component as l,space as o,attr as r,insert as u,append as c,mount_component as p,transition_in as m,group_outros as d,transition_out as f,check_outros as $,add_flush_callback as g,detach as k,destroy_component as b,component_subscribe as y}from"../../../../../node_modules/svelte/internal/index.js";import{writable as w}from"../../../../../node_modules/svelte/store/index.js";import v from"../../../components/compositions/input-floating/floating-label.js";import h from"../../../components/compositions/input-stacked/stacked-label.js";import _ from"../../../components/compositions/select-floating/floating-label.js";import x from"../../../components/_utilities/locale-strings.js";import{interpolate as I}from"../../../_utilities/i18n.utilities.js";import Q from"../../../components/icons/lock-icon.js";function F(e){let t,n;return t=new e[7]({props:{isFirstInvalidInput:!1,key:`kba-custom-question-${e[0].idx}`,label:I("customSecurityQuestion"),showMessage:!1,message:I("inputRequiredError"),onChange:e[11],type:"text"}}),{c(){l(t.$$.fragment)},m(e,s){p(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.key=`kba-custom-question-${e[0].idx}`),t.$set(s)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function M(e){let t,n,y,w,v,h,M,j,C,A,S,q,D,U,P,E;y=new x({props:{key:"securityQuestions"}}),h=new x({props:{key:"securityQuestionsPrompt"}}),C=new Q({props:{size:"18"}}),S=new _({props:{isFirstInvalidInput:!1,key:e[4],label:e[1],onChange:e[10],options:e[2]}});let K=e[3]&&F(e);function O(t){e[20](t)}let R={isFirstInvalidInput:e[0].isFirstInvalidInput,key:e[5]||`kba-answer-${e[0].idx}`,label:I("securityAnswer"),showMessage:!1,message:I("inputRequiredError"),onChange:e[9],type:"text"};return void 0!==e[6]&&(R.value=e[6]),U=new e[7]({props:R}),s.push((()=>a(U,"value",O))),{c(){t=i("fieldset"),n=i("legend"),l(y.$$.fragment),w=o(),v=i("h2"),l(h.$$.fragment),M=o(),j=i("span"),l(C.$$.fragment),A=o(),l(S.$$.fragment),q=o(),K&&K.c(),D=o(),l(U.$$.fragment),r(n,"class","tw_sr-only"),r(v,"class","tw_secondary-header dark:tw_secondary-header_dark"),r(j,"class","tw_kba-lock-icon dark:tw_kba-lock-icon_dark"),r(t,"class","tw_kba-fieldset tw_input-spacing dark:tw_kba-fieldset_dark")},m(e,s){u(e,t,s),c(t,n),p(y,n,null),c(t,w),c(t,v),p(h,v,null),c(t,M),c(t,j),p(C,j,null),c(t,A),p(S,t,null),c(t,q),K&&K.m(t,null),c(t,D),p(U,t,null),E=!0},p(e,[n]){const s={};16&n&&(s.key=e[4]),2&n&&(s.label=e[1]),4&n&&(s.options=e[2]),S.$set(s),e[3]?K?(K.p(e,n),8&n&&m(K,1)):(K=F(e),K.c(),m(K,1),K.m(t,D)):K&&(d(),f(K,1,1,(()=>{K=null})),$());const a={};1&n&&(a.isFirstInvalidInput=e[0].isFirstInvalidInput),33&n&&(a.key=e[5]||`kba-answer-${e[0].idx}`),!P&&64&n&&(P=!0,a.value=e[6],g((()=>P=!1))),U.$set(a)},i(e){E||(m(y.$$.fragment,e),m(h.$$.fragment,e),m(C.$$.fragment,e),m(S.$$.fragment,e),m(K),m(U.$$.fragment,e),E=!0)},o(e){f(y.$$.fragment,e),f(h.$$.fragment,e),f(C.$$.fragment,e),f(S.$$.fragment,e),f(K),f(U.$$.fragment,e),E=!1},d(e){e&&k(t),b(y),b(h),b(C),b(S),K&&K.d(),b(U)}}}function j(e,t,n){let s,{callback:a}=t,{callbackMetadata:i}=t,{selfSubmitFunction:l=null}=t,{stepMetadata:o}=t,{style:r={}}=t;const u="stacked"===r.labels?h:v;let c,p,m,d,f,$,g,k=null,b=!1,_=w("");y(e,_,(e=>n(6,s=e)));try{g=a.getOutputValue("allowUserDefinedQuestions")}catch(e){console.error("`allowUserDefinedQuestions` property is missing in callback `KbaCreateCallback`")}return e.$$set=e=>{"callback"in e&&n(12,a=e.callback),"callbackMetadata"in e&&n(0,i=e.callbackMetadata),"selfSubmitFunction"in e&&n(13,l=e.selfSubmitFunction),"stepMetadata"in e&&n(14,o=e.stepMetadata),"style"in e&&n(15,r=e.style)},e.$$.update=()=>{if(987143&e.$$.dirty){n(17,c=a?.payload?.input),n(18,p=a?.payload?.input?.[0].name||`kba-${i.idx}`),n(4,m=p),n(5,d=Array.isArray(c)&&c[1].name),n(1,f=a.getPrompt()),n(2,$=a.getPredefinedQuestions()?.map(((e,t)=>({text:e,value:`${t}`}))));try{n(19,g=a.getOutputValue("allowUserDefinedQuestions"))}catch(e){console.error("`allowUserDefinedQuestions` property is missing in callback `KbaCreateCallback`")}$.unshift({text:f,value:""}),g&&(n(16,k=""+($.length-1)),$.push({text:I("provideCustomQuestion"),value:k}))}},[i,f,$,b,m,d,s,u,_,function(e){a.setAnswer(e.target.value)},function(e){const t=e.target.value;t===k?(n(3,b=!0),_.set(""),a.setAnswer("")):(n(3,b=!1),a.setQuestion(t))},function(e){const t=e.target.value;a.setQuestion(t)},a,l,o,r,k,c,p,g,function(e){s=e,_.set(s)}]}class C extends e{constructor(e){super(),t(this,e,j,M,n,{callback:12,callbackMetadata:0,selfSubmitFunction:13,stepMetadata:14,style:15})}}export{C as default};