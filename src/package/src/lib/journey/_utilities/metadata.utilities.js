import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/auth/index.js";import{CallbackType as e}from"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/auth/enums.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/config/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/event/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/attribute-input-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/choice-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/confirmation-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/device-profile-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/hidden-value-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/kba-create-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/metadata-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/name-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/password-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/polling-wait-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/recaptcha-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/redirect-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/select-idp-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/suspended-text-output-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/terms-and-conditions-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/text-input-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/text-output-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/validated-create-password-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/validated-create-username-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/enums.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/fr-login-failure.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/fr-login-success.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/fr-step.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-device/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-policy/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-policy/message-creator.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-user/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-webauthn/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/http-client/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/oauth2-client/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/session-manager/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/token-manager/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/token-storage/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/user-manager/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/util/pkce.js";const a=[e.ConfirmationCallback,e.DeviceProfileCallback,e.PollingWaitCallback,e.SelectIdPCallback],s=[e.BooleanAttributeInputCallback,e.ChoiceCallback,e.ConfirmationCallback,e.KbaCreateCallback,e.NameCallback,e.NumberAttributeInputCallback,e.PasswordCallback,e.ReCaptchaCallback,e.SelectIdPCallback,e.StringAttributeInputCallback,e.TermsAndConditionsCallback,e.ValidatedCreatePasswordCallback,e.ValidatedCreateUsernameCallback],r={SelectIdPCallback:e=>!!e.getProviders().find((e=>"localAuthentication"===e.provider))};function o(e,a){return e?.callbacks.map(((e,s)=>({canForceUserInputOptionality:i(e),isFirstInvalidInput:a(e),isReadyForSubmission:t(e),isSelfSubmitting:c(e),isUserInputRequired:n(e),idx:s})))}function l(e){const a=e.filter((e=>!!e.isUserInputRequired)).length,s=m(e,a);return{isStepSelfSubmittable:d(e,s),isUserInputOptional:s,numOfCallbacks:e.length,numOfSelfSubmittableCbs:e.filter((e=>!!e.isSelfSubmitting)).length,numOfUserInputCbs:a}}function t(a){if(a.getType()===e.ConfirmationCallback){if(1===a.getOptions().length)return!0}return!1}function i(e){const a=r[e.getType()];return a&&a(e)}function c(e){return a.includes(e.getType())}function d(e,a){if(a)return!0;return!e.filter((e=>e.isUserInputRequired&&!e.isSelfSubmitting)).length}function n(a){if(a.getType()===e.SelectIdPCallback)return!1;if(a.getType()===e.ConfirmationCallback){if(1===a.getOptions().length)return!1}return s.includes(a.getType())}function m(e,a,s){return e.reduce(s||((e,s)=>(s.canForceUserInputOptionality&&a>0&&(e=!0),e)),!1)}export{o as buildCallbackMetadata,l as buildStepMetadata,i as canForceUserInputOptionality,t as isCbReadyByDefault,c as isSelfSubmitting,d as isStepSelfSubmittable,m as isUserInputOptional,n as requiresUserInput};