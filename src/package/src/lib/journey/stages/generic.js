import{SvelteComponent as e,init as t,safe_not_equal as s,binding_callbacks as r,bind as o,create_component as a,mount_component as i,add_flush_callback as l,transition_in as c,transition_out as n,destroy_component as m,component_subscribe as d,afterUpdate as p,space as u,element as f,empty as k,attr as g,insert as b,append as j,group_outros as $,check_outros as _,detach as v,destroy_each as h,text as x,set_data as y,construct_svelte_component as w,noop as S}from"../../../../node_modules/svelte/internal/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/auth/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/auth/enums.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/config/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/event/index.js";import F from"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/attribute-input-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/choice-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/confirmation-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/device-profile-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/hidden-value-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/kba-create-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/metadata-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/name-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/password-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/polling-wait-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/recaptcha-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/redirect-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/select-idp-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/suspended-text-output-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/terms-and-conditions-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/text-input-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/text-output-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/validated-create-password-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/callbacks/validated-create-username-callback.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/enums.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/fr-login-failure.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/fr-login-success.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-auth/fr-step.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-device/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-policy/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-policy/message-creator.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-user/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/fr-webauthn/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/http-client/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/oauth2-client/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/session-manager/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/token-manager/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/token-storage/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/user-manager/index.js";import"../../../../node_modules/@forgerock/javascript-sdk/lib-esm/util/pkce.js";import{interpolate as M}from"../../_utilities/i18n.utilities.js";import E from"../../components/_utilities/locale-strings.js";import I from"../../components/primitives/alert/alert.js";import N from"../../components/primitives/button/button.js";import{shouldRedirectFromStep as B,initCheckValidation as D,convertStringToKey as H}from"../_utilities/step.utilities.js";import O from"../../components/primitives/form/form.js";import{mapCallbackToComponent as U}from"../_utilities/map-callback.utilities.js";import{buildCallbackMetadata as z,buildStepMetadata as V}from"../_utilities/metadata.utilities.js";import W from"../../components/_utilities/server-strings.js";import q from"../../components/icons/shield-icon.js";import{style as A}from"../../style.store.js";function C(e,t,s){const r=e.slice();return r[17]=t[s],r[19]=s,r}function G(e){let t,s,r;return s=new q({props:{classes:"tw_text-gray-400 tw_fill-current",size:"72px"}}),{c(){t=f("div"),a(s.$$.fragment),g(t,"class","tw_flex tw_justify-center")},m(e,o){b(e,t,o),i(s,t,null),r=!0},i(e){r||(c(s.$$.fragment,e),r=!0)},o(e){n(s.$$.fragment,e),r=!1},d(e){e&&v(t),m(s)}}}function J(e){let t,s;return t=new I({props:{id:X,needsFocus:e[7],type:"error",$$slots:{default:[K]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},m(e,r){i(t,e,r),s=!0},p(e,s){const r={};128&s&&(r.needsFocus=e[7]),1048836&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){n(t.$$.fragment,e),s=!1},d(e){m(t,e)}}}function K(e){let t,s=M(e[8],null,e[2])+"";return{c(){t=x(s)},m(e,s){b(e,t,s)},p(e,r){260&r&&s!==(s=M(e[8],null,e[2])+"")&&y(t,s)},d(e){e&&v(t)}}}function L(e){let t,s,r;var o=U(e[17]);function l(e){return{props:{callback:e[17],callbackMetadata:e[5][e[19]],selfSubmitFunction:e[12],step:e[4],stepMetadata:{...e[10]},style:e[11]}}}return o&&(t=w(o,l(e))),{c(){t&&a(t.$$.fragment),s=k()},m(e,o){t&&i(t,e,o),b(e,s,o),r=!0},p(e,r){const d={};if(16&r&&(d.callback=e[17]),32&r&&(d.callbackMetadata=e[5][e[19]]),16&r&&(d.step=e[4]),1024&r&&(d.stepMetadata={...e[10]}),2048&r&&(d.style=e[11]),o!==(o=U(e[17]))){if(t){$();const e=t;n(e.$$.fragment,1,0,(()=>{m(e,1)})),_()}o?(t=w(o,l(e)),a(t.$$.fragment),c(t.$$.fragment,1),i(t,s.parentNode,s)):t=null}else o&&t.$set(d)},i(e){r||(t&&c(t.$$.fragment,e),r=!0)},o(e){t&&n(t.$$.fragment,e),r=!1},d(e){e&&v(s),t&&m(t,e)}}}function P(e){let t,s;return t=new N({props:{busy:e[3],style:"primary",type:"submit",width:"full",$$slots:{default:[Q]},$$scope:{ctx:e}}}),{c(){a(t.$$.fragment)},m(e,r){i(t,e,r),s=!0},p(e,s){const r={};8&s&&(r.busy=e[3]),1048576&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){n(t.$$.fragment,e),s=!1},d(e){m(t,e)}}}function Q(e){let t,s;return t=new E({props:{key:"nextButton"}}),{c(){a(t.$$.fragment)},m(e,r){i(t,e,r),s=!0},p:S,i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){n(t.$$.fragment,e),s=!1},d(e){m(t,e)}}}function R(e){let t,s,r,o,l,d,p,x,y,w,S,F,M=e[1]&&G();o=new W({props:{html:!0,string:e[4]?.getHeader()||""}}),p=new W({props:{html:!0,string:e[4]?.getDescription()||""}});let E=e[2]&&J(e),I=e[4]?.callbacks,N=[];for(let t=0;t<I.length;t+=1)N[t]=L(C(e,I,t));const B=e=>n(N[e],1,1,(()=>{N[e]=null}));let D=(e[10].isUserInputOptional||!e[10].isStepSelfSubmittable)&&P(e);return{c(){M&&M.c(),t=u(),s=f("header"),r=f("h1"),a(o.$$.fragment),l=u(),d=f("p"),a(p.$$.fragment),x=u(),E&&E.c(),y=u();for(let e=0;e<N.length;e+=1)N[e].c();w=u(),D&&D.c(),S=k(),g(r,"class","tw_primary-header dark:tw_primary-header_dark"),g(d,"class","tw_text-center tw_-mt-5 tw_mb-2 tw_py-4 tw_text-secondary-dark dark:tw_text-secondary-light"),g(s,"id",Y)},m(e,a){M&&M.m(e,a),b(e,t,a),b(e,s,a),j(s,r),i(o,r,null),j(s,l),j(s,d),i(p,d,null),b(e,x,a),E&&E.m(e,a),b(e,y,a);for(let t=0;t<N.length;t+=1)N[t].m(e,a);b(e,w,a),D&&D.m(e,a),b(e,S,a),F=!0},p(e,s){e[1]?M?2&s&&c(M,1):(M=G(),M.c(),c(M,1),M.m(t.parentNode,t)):M&&($(),n(M,1,1,(()=>{M=null})),_());const r={};16&s&&(r.string=e[4]?.getHeader()||""),o.$set(r);const a={};if(16&s&&(a.string=e[4]?.getDescription()||""),p.$set(a),e[2]?E?(E.p(e,s),4&s&&c(E,1)):(E=J(e),E.c(),c(E,1),E.m(y.parentNode,y)):E&&($(),n(E,1,1,(()=>{E=null})),_()),7216&s){let t;for(I=e[4]?.callbacks,t=0;t<I.length;t+=1){const r=C(e,I,t);N[t]?(N[t].p(r,s),c(N[t],1)):(N[t]=L(r),N[t].c(),c(N[t],1),N[t].m(w.parentNode,w))}for($(),t=I.length;t<N.length;t+=1)B(t);_()}e[10].isUserInputOptional||!e[10].isStepSelfSubmittable?D?(D.p(e,s),1024&s&&c(D,1)):(D=P(e),D.c(),c(D,1),D.m(S.parentNode,S)):D&&($(),n(D,1,1,(()=>{D=null})),_())},i(e){if(!F){c(M),c(o.$$.fragment,e),c(p.$$.fragment,e),c(E);for(let e=0;e<I.length;e+=1)c(N[e]);c(D),F=!0}},o(e){n(M),n(o.$$.fragment,e),n(p.$$.fragment,e),n(E),N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)n(N[e]);n(D),F=!1},d(e){M&&M.d(e),e&&v(t),e&&v(s),m(o),m(p),e&&v(x),E&&E.d(e),e&&v(y),h(N,e),e&&v(w),D&&D.d(e),e&&v(S)}}}function T(e){let t,s,d;function p(t){e[16](t)}let u={ariaDescribedBy:e[9],id:Z,needsFocus:e[6],onSubmitWhenValid:e[13],$$slots:{default:[R]},$$scope:{ctx:e}};return void 0!==e[0]&&(u.formEl=e[0]),t=new O({props:u}),r.push((()=>o(t,"formEl",p))),{c(){a(t.$$.fragment)},m(e,s){i(t,e,s),d=!0},p(e,[r]){const o={};512&r&&(o.ariaDescribedBy=e[9]),64&r&&(o.needsFocus=e[6]),1052094&r&&(o.$$scope={dirty:r,ctx:e}),!s&&1&r&&(s=!0,o.formEl=e[0],l((()=>s=!1))),t.$set(o)},i(e){d||(c(t.$$.fragment,e),d=!0)},o(e){n(t.$$.fragment,e),d=!1},d(e){m(t,e)}}}const X="genericStepFailureMessage",Y="genericStepHeader",Z="genericStepForm";function ee(e,t,s){let r;d(e,A,(e=>s(11,r=e)));let o,a,{displayIcon:i}=t,{failureMessage:l}=t,{formEl:c=null}=t,{loading:n}=t,{step:m}=t,{submitForm:u}=t,f=!1,k=[],g="",b="genericStepHeader",j=!1;function $(){s(7,f=!1),s(6,j=!1),u()}return p((()=>{l?(s(9,b=X),s(7,f=!0),s(6,j=!1)):(s(9,b=Y),s(7,f=!1),s(6,j=!0))})),e.$$set=e=>{"displayIcon"in e&&s(1,i=e.displayIcon),"failureMessage"in e&&s(2,l=e.failureMessage),"formEl"in e&&s(0,c=e.formEl),"loading"in e&&s(3,n=e.loading),"step"in e&&s(4,m=e.step),"submitForm"in e&&s(14,u=e.submitForm)},e.$$.update=()=>{32884&e.$$.dirty&&(B(m)&&F.redirect(m),console.log(j),s(15,o=D()),s(5,k=z(m,o)),s(10,a=V(k)),s(8,g=H(l)))},[c,i,l,n,m,k,j,f,g,b,a,r,function(){a.isStepSelfSubmittable&&$()},$,u,o,function(e){c=e,s(0,c)}]}class te extends e{constructor(e){super(),t(this,e,ee,T,s,{displayIcon:1,failureMessage:2,formEl:0,loading:3,step:4,submitForm:14})}}export{te as default};