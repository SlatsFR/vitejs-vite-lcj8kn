import e from"../oauth2-client/index.js";import n from"../session-manager/index.js";import t from"../token-manager/index.js";import r from"../user-manager/index.js";var o=function(e,n,t,r){return new(t||(t=Promise))((function(o,s){function u(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,i)}c((r=r.apply(e,n||[])).next())}))},s=function(e,n){var t,r,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){u.label=s[1];break}if(6===s[0]&&u.label<o[1]){u.label=o[1],o=s;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(s);break}o[2]&&u.ops.pop(),u.trys.pop();continue}s=n.call(e,u)}catch(e){s=[6,e],r=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},u=function(){function u(){}return u.login=function(e,n){return o(this,void 0,void 0,(function(){return s(this,(function(t){throw console.info(e,n),new Error("FRUser.login() not implemented")}))}))},u.loginWithUI=function(e,n){return o(this,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,e.getSession(n)];case 1:return o.sent(),[4,t.getTokens({forceRenew:!0})];case 2:return o.sent(),[4,r.getCurrentUser()];case 3:return[2,o.sent()];case 4:throw o.sent(),new Error("Login failed");case 5:return[2]}}))}))},u.logout=function(r){return o(this,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n.logout(r)];case 1:return o.sent(),[3,3];case 2:return o.sent(),console.warn("Session logout was not successful"),[3,3];case 3:return o.trys.push([3,5,,6]),[4,e.endSession(r)];case 4:return o.sent(),[3,6];case 5:return o.sent(),console.warn("OAuth endSession was not successful"),[3,6];case 6:return o.trys.push([6,8,,9]),[4,e.revokeToken(r)];case 7:return o.sent(),[3,9];case 8:return o.sent(),console.warn("OAuth revokeToken was not successful"),[3,9];case 9:return[4,t.deleteTokens()];case 10:return o.sent(),[2]}}))}))},u}();export{u as default};