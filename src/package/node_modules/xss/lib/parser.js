import{__exports as r}from"../../../_virtual/parser.js";export{__exports as default}from"../../../_virtual/parser.js";import e from"./util.js";var t=e;function i(r){var e,i=t.spaceIndex(r);return e=-1===i?r.slice(1,-1):r.slice(1,i+1),"/"===(e=t.trim(e).toLowerCase()).slice(0,1)&&(e=e.slice(1)),"/"===e.slice(-1)&&(e=e.slice(0,-1)),e}function n(r){return"</"===r.slice(0,2)}var c=/[^a-zA-Z0-9\\_:.-]/gim;function s(r,e){for(;e<r.length;e++){var t=r[e];if(" "!==t)return"="===t?e:-1}}function f(r,e){for(;e<r.length;e++){var t=r[e];if(" "!==t)return"'"===t||'"'===t?e:-1}}function l(r,e){for(;e>0;e--){var t=r[e];if(" "!==t)return"="===t?e:-1}}function o(r){return function(r){return'"'===r[0]&&'"'===r[r.length-1]||"'"===r[0]&&"'"===r[r.length-1]}(r)?r.substr(1,r.length-2):r}r.parseTag=function(r,e,t){var c="",s=0,f=!1,l=!1,o=0,a=r.length,u="",h="";r:for(o=0;o<a;o++){var v=r.charAt(o);if(!1===f){if("<"===v){f=o;continue}}else if(!1===l){if("<"===v){c+=t(r.slice(s,o)),f=o,s=o;continue}if(">"===v||o===a-1){c+=t(r.slice(s,f)),u=i(h=r.slice(f,o+1)),c+=e(f,c.length,u,h,n(h)),s=o+1,f=!1;continue}if('"'===v||"'"===v)for(var m=1,g=r.charAt(o-m);""===g.trim()||"="===g;){if("="===g){l=v;continue r}g=r.charAt(o-++m)}}else if(v===l){l=!1;continue}}return s<a&&(c+=t(r.substr(s))),c},r.parseAttr=function(r,e){var i=0,n=0,a=[],u=!1,h=r.length;function v(r,i){if(!((r=(r=t.trim(r)).replace(c,"").toLowerCase()).length<1)){var n=e(r,i||"");n&&a.push(n)}}for(var m=0;m<h;m++){var g,p=r.charAt(m);if(!1!==u||"="!==p)if(!1===u||m!==n)if(/\s|\n|\t/.test(p)){if(r=r.replace(/\s|\n|\t/g," "),!1===u){if(-1===(g=s(r,m))){v(t.trim(r.slice(i,m))),u=!1,i=m+1;continue}m=g-1;continue}if(-1===(g=l(r,m-1))){v(u,o(t.trim(r.slice(i,m)))),u=!1,i=m+1;continue}}else;else{if(-1===(g=r.indexOf(p,m+1)))break;v(u,t.trim(r.slice(n+1,g))),u=!1,i=(m=g)+1}else u=r.slice(i,m),i=m+1,n='"'===r.charAt(i)||"'"===r.charAt(i)?i:f(r,m+1)}return i<r.length&&(!1===u?v(r.slice(i)):v(u,o(t.trim(r.slice(i))))),t.trim(a.join(" "))};